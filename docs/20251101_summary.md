# 2025-11-01 Summary

## 進捗と要点
- フロントエンドの API 呼び出しを「Simple Request」に統一し、`Content-Type: text/plain` のみ利用するよう変更。
- リクエスト URL には `origin` とキャッシュバスターを必ず付与し、POST 本文には `action` と `origin` を含めて GAS のルーターに対応。
- GAS エンドポイントを管理画面から設定・共有できるユーティリティを実装。
- `npm run test:gas` で CORS 応答を確認できるスクリプトを追加。
- Netlify 本番に最新フロントエンドをデプロイ済み（deploy ID: 6905c879f9295bb9f65310b7）。

## 現状の課題
- GAS のデプロイ版で `respond_` が未定義のままのため CORS ヘッダが返らず、API の保存処理が失敗している。

## 次に進める手順
1. GAS を最新コード（`doOptions` と `respond_` 付き CORS 対応版）へ更新して再デプロイ。
2. 管理画面から最新 GAS URL を設定し、`npm run test:gas` でヘッダを確認。
3. スプレッドシートへの保存・同期が動作するか再検証。

## 現状アプリ仕様
- **受信メールタブ**: メール一覧・プレビュー、返信案編集、翻訳／要約、承認送信。
- **受信設定タブ**: プロバイダ、IMAP 接続情報などを入力・保存（キー: provider, forwardingAddress, mailboxUser, imapHost, imapPort, encryption, forwardingNote, mailboxNote, username, password, phonenumber, email）。
- **管理画面**: Gemini 設定、ユーザー管理、GAS エンドポイント設定。
- **API 仕様**: GET/POST とも Simple Request で `origin` を重ねて送信し、`credentials: 'omit'` を使用。
